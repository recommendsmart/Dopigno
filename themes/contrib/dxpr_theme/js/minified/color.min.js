!function(e){Drupal.behaviors.color={attach(t,o){let n,s,i;const l=e("#system-theme-settings .color-form",t).once("color");if(0==l.length)return;const c=[];let a=null;e(l).prepend('<div id="placeholder"></div>').addClass("color-processed");const r=e.farbtastic("#placeholder"),{reference:u}=o.color;for(n in u)u[n]=r.RGBToHSL(r.unpack(u[n]));function d(t,o,n,s){e(t).css({backgroundColor:o,color:r.RGBToHSL(r.unpack(o))[2]>.5?"#000":"#fff"}),e(t).val()&&e(t).val()!=o&&(e(t).val(o),s||p())}function p(){e("#edit-scheme",l).each((function(){this.selectedIndex=this.options.length-1}))}function h(){const t=this;a&&e(a).unbind("keyup",r.updateValue).unbind("keyup",preview).unbind("keyup",p).parent().removeClass("item-selected"),a=this,r.linkTo(e=>{d(t,e,0,!1)}),r.setColor(this.value),e(a).keyup(r.updateValue).keyup(preview).keyup(p).parent().addClass("item-selected")}e("#edit-scheme",l).change((function(){const{schemes:t}=o.color,n=this.options[this.selectedIndex].value;if(""!=n&&t[n])for(i in s=t[n],s)d(e("#edit-palette-"+i),s[i],!1,!0)})),e("#palette input.form-text",l).each((function(){this.key=this.id.substring(13),r.linkTo(()=>{}).setColor("#000").linkTo(this),this.i=n,c.push(this)})).focus(h),e("#palette label",l),h.call(c[0])}}}(jQuery);