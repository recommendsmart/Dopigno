{"version":3,"file":"global.min.js","sources":["global.js"],"sourcesContent":["/**\n * @file\n * Global utilities.\n *\n */\n(function ($, Drupal) {\n\n  \"use strict\";\n\n  Drupal.behaviors.droopler_theme = {\n    attach: function (context, settings) {\n      var $body = $('body');\n      if ($body.hasClass('d-theme-preceded')) {\n        return;\n      }\n      $(window).once('d_global_scrolled').scroll(function() {\n        if ($(this).scrollTop() > 50) {\n          $(\"body\").addClass(\"scrolled\");\n        }\n        else{\n          $(\"body\").removeClass(\"scrolled\");\n        }\n      });\n\n      $( window ).once('d_global_resize').resize(function() {\n        clampTitle();\n      });\n      clampTitle();\n\n      /**\n       * Triger title to 2 lines and add ... .\n       */\n      function clampTitle() {\n        var containers = document.querySelectorAll('.product-teaser-content .node__title');\n        Array.prototype.forEach.call(containers, function (container) {\n          var p = container.querySelector('span');\n          var divh = container.clientHeight;\n          while (p.offsetHeight > divh) {\n            p.textContent = p.textContent.replace(/\\W*\\s(\\S)*$/, '...');\n          }\n        });\n      }\n\n      // Enable hover on dropdowns.\n      $(\"#header .dropdown, .language-switcher-language-url\").hover(function() {\n        // We don't manipulate on default \"show\" class here.\n        // Using additional class prevents mobile bugs.\n        $(this).addClass(\"force-show\");\n        $(this).find(\".dropdown-menu\").addClass(\"force-show\");\n      }, function() {\n        // On hover out remove also default \"show\" class.\n        $(this).removeClass(\"force-show\").removeClass(\"show\");\n        $(this).find(\".dropdown-menu\").removeClass(\"force-show\").removeClass(\"show\");\n      });\n\n      // Prevent hover on touch devices - revert to default behavior.\n      $('.menu-dropdown-icon').on({ 'touchstart' : function(){\n        $(this).parent().removeClass('force-show');\n        $(this).parent().find(\".dropdown-menu\").removeClass('force-show');\n      } });\n      $body.addClass(\"d-theme-preceded\")\n    }\n  };\n\n  /**\n   * Adds additional div above the unpublished content.\n   * @type {{attach: Drupal.behaviors.droopler_unpublished.attach}}\n   */\n  Drupal.behaviors.droopler_unpublished = {\n    attach: function (context, settings) {\n      $('<div>').addClass('unpublished-message').text(Drupal.t('Unpublished')).insertBefore($('.node--unpublished', context));\n    }\n  };\n\n})(jQuery, Drupal);\n"],"names":["$","Drupal","behaviors","droopler_theme","attach","context","settings","$body","clampTitle","containers","document","querySelectorAll","Array","prototype","forEach","call","container","p","querySelector","divh","clientHeight","offsetHeight","textContent","replace","hasClass","window","once","scroll","this","scrollTop","addClass","removeClass","resize","hover","find","on","touchstart","parent","droopler_unpublished","text","t","insertBefore","jQuery"],"mappings":"CAKA,SAAWA,EAAGC,gBAIZA,EAAOC,UAAUC,eAAiB,CAChCC,OAAQ,SAAUC,EAASC,GACzB,IAAIC,EAAQP,EAAE,QAqBd,SAASQ,IACP,IAAIC,EAAaC,SAASC,iBAAiB,wCAC3CC,MAAMC,UAAUC,QAAQC,KAAKN,EAAY,SAAUO,GAGjD,IAFA,IAAIC,EAAID,EAAUE,cAAc,QAC5BC,EAAOH,EAAUI,aACdH,EAAEI,aAAeF,GACtBF,EAAEK,YAAcL,EAAEK,YAAYC,QAAQ,cAAe,SA1BvDhB,EAAMiB,SAAS,sBAGnBxB,EAAEyB,QAAQC,KAAK,qBAAqBC,OAAO,WACf,GAAtB3B,EAAE4B,MAAMC,YACV7B,EAAE,QAAQ8B,SAAS,YAGnB9B,EAAE,QAAQ+B,YAAY,cAI1B/B,EAAGyB,QAASC,KAAK,mBAAmBM,OAAO,WACzCxB,MAEFA,IAiBAR,EAAE,sDAAsDiC,MAAM,WAG5DjC,EAAE4B,MAAME,SAAS,cACjB9B,EAAE4B,MAAMM,KAAK,kBAAkBJ,SAAS,eACvC,WAED9B,EAAE4B,MAAMG,YAAY,cAAcA,YAAY,QAC9C/B,EAAE4B,MAAMM,KAAK,kBAAkBH,YAAY,cAAcA,YAAY,UAIvE/B,EAAE,uBAAuBmC,GAAG,CAAEC,WAAe,WAC3CpC,EAAE4B,MAAMS,SAASN,YAAY,cAC7B/B,EAAE4B,MAAMS,SAASH,KAAK,kBAAkBH,YAAY,iBAEtDxB,EAAMuB,SAAS,uBAQnB7B,EAAOC,UAAUoC,qBAAuB,CACtClC,OAAQ,SAAUC,EAASC,GACzBN,EAAE,SAAS8B,SAAS,uBAAuBS,KAAKtC,EAAOuC,EAAE,gBAAgBC,aAAazC,EAAE,qBAAsBK,MAjEpH,CAqEGqC,OAAQzC"}